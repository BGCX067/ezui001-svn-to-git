<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="v_order_pay_info" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="cn.vstore.appserver.model.VOrderPayInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 16 14:39:37 CST 2012.
    -->
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="merchantsid" property="merchantsid" jdbcType="VARCHAR" />
    <result column="productid" property="productid" jdbcType="VARCHAR" />
    <result column="channelid" property="channelid" jdbcType="VARCHAR" />
    <result column="version" property="version" jdbcType="VARCHAR" />
    <result column="merusername" property="merusername" jdbcType="VARCHAR" />
    <result column="meruseremail" property="meruseremail" jdbcType="VARCHAR" />
    <result column="privatefield" property="privatefield" jdbcType="VARCHAR" />
    <result column="userid" property="userid" jdbcType="VARCHAR" />
    <result column="usertp" property="usertp" jdbcType="VARCHAR" />
    <result column="paytype" property="paytype" jdbcType="VARCHAR" />
    <result column="orderno" property="orderno" jdbcType="VARCHAR" />
    <result column="payorderno" property="payorderno" jdbcType="VARCHAR" />
    <result column="orderstatus" property="orderstatus" jdbcType="VARCHAR" />
    <result column="returnurl" property="returnurl" jdbcType="VARCHAR" />
    <result column="denomination" property="denomination" jdbcType="DOUBLE" />
    <result column="cardno" property="cardno" jdbcType="VARCHAR" />
    <result column="cardpwd" property="cardpwd" jdbcType="VARCHAR" />
    <result column="cardtype" property="cardtype" jdbcType="VARCHAR" />
    <result column="cardinfo" property="cardinfo" jdbcType="VARCHAR" />
    <result column="amount" property="amount" jdbcType="DOUBLE" />
    <result column="itemid" property="itemid" jdbcType="VARCHAR" />
    <result column="reserveinfo" property="reserveinfo" jdbcType="VARCHAR" />
    <result column="timestamp" property="timestamp" jdbcType="VARCHAR" />
    <result column="verifytype" property="verifytype" jdbcType="VARCHAR" />
    <result column="verifystr" property="verifystr" jdbcType="VARCHAR" />
    <result column="signstring" property="signstring" jdbcType="VARCHAR" />
    <result column="createdate" property="createdate" jdbcType="TIMESTAMP" />
    <result column="paydate" property="paydate" jdbcType="TIMESTAMP" />
    <result column="memid" property="memid" jdbcType="BIGINT" />
    <result column="pkgName" property="pkgname" jdbcType="VARCHAR" />
    <result column="buytype" property="buytype" jdbcType="VARCHAR" />
    <result column="nums" property="nums" jdbcType="VARCHAR" />
    <result column="snum" property="snum" jdbcType="VARCHAR" />
    <result column="propstype" property="propstype" jdbcType="VARCHAR" />
  </resultMap>
 <insert id="ibatorgenerated_insert" parameterClass="cn.vstore.appserver.model.VOrderPayInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 16 14:39:37 CST 2012.
    -->
    insert into v_order_pay_info (merchantsid, productid, channelid, version, merusername,
      meruseremail, privatefield, userid, usertp, paytype, orderno, payorderno, orderstatus,
      returnurl, denomination, cardno, cardpwd, cardtype, cardinfo, amount, itemid, reserveinfo,
      timestamp, verifytype, verifystr, signstring, createdate, paydate, memid, pkgName, buytype, nums, snum, propstype)
    values (#merchantsid:VARCHAR#, #productid:VARCHAR#, #channelid:VARCHAR#, #version:VARCHAR#,
      #merusername:VARCHAR#, #meruseremail:VARCHAR#, #privatefield:VARCHAR#, #userid:VARCHAR#,
      #usertp:VARCHAR#, #paytype:VARCHAR#, #orderno:VARCHAR#, #payorderno:VARCHAR#,
      #orderstatus:VARCHAR#, #returnurl:VARCHAR#, #denomination:DOUBLE#, #cardno:VARCHAR#,
      #cardpwd:VARCHAR#, #cardtype:VARCHAR#, #cardinfo:VARCHAR#, #amount:DOUBLE#, #itemid:VARCHAR#,
      #reserveinfo:VARCHAR#, #timestamp:VARCHAR#, #verifytype:VARCHAR#, #verifystr:VARCHAR#,
      #signstring:VARCHAR#, #createdate:TIMESTAMP#, #paydate:TIMESTAMP#, #memid:BIGINT#,
      #pkgname:VARCHAR#,#buytype:VARCHAR#,#nums:VARCHAR#,#snum:VARCHAR#,#propstype:VARCHAR#)
    <selectKey resultClass="java.lang.Long" keyProperty="id" >
      SELECT LAST_INSERT_ID()
    </selectKey>
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="cn.vstore.appserver.model.VOrderPayInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 16 14:39:37 CST 2012.
    -->
    insert into v_order_pay_info
    <dynamic prepend="(" >
      <isNotNull prepend="," property="merchantsid" >
        merchantsid
      </isNotNull>
      <isNotNull prepend="," property="productid" >
        productid
      </isNotNull>
      <isNotNull prepend="," property="channelid" >
        channelid
      </isNotNull>
      <isNotNull prepend="," property="version" >
        version
      </isNotNull>
      <isNotNull prepend="," property="merusername" >
        merusername
      </isNotNull>
      <isNotNull prepend="," property="meruseremail" >
        meruseremail
      </isNotNull>
      <isNotNull prepend="," property="privatefield" >
        privatefield
      </isNotNull>
      <isNotNull prepend="," property="userid" >
        userid
      </isNotNull>
      <isNotNull prepend="," property="usertp" >
        usertp
      </isNotNull>
      <isNotNull prepend="," property="paytype" >
        paytype
      </isNotNull>
      <isNotNull prepend="," property="orderno" >
        orderno
      </isNotNull>
      <isNotNull prepend="," property="payorderno" >
        payorderno
      </isNotNull>
      <isNotNull prepend="," property="orderstatus" >
        orderstatus
      </isNotNull>
      <isNotNull prepend="," property="returnurl" >
        returnurl
      </isNotNull>
      <isNotNull prepend="," property="denomination" >
        denomination
      </isNotNull>
      <isNotNull prepend="," property="cardno" >
        cardno
      </isNotNull>
      <isNotNull prepend="," property="cardpwd" >
        cardpwd
      </isNotNull>
      <isNotNull prepend="," property="cardtype" >
        cardtype
      </isNotNull>
      <isNotNull prepend="," property="cardinfo" >
        cardinfo
      </isNotNull>
      <isNotNull prepend="," property="amount" >
        amount
      </isNotNull>
      <isNotNull prepend="," property="itemid" >
        itemid
      </isNotNull>
      <isNotNull prepend="," property="reserveinfo" >
        reserveinfo
      </isNotNull>
      <isNotNull prepend="," property="timestamp" >
        timestamp
      </isNotNull>
      <isNotNull prepend="," property="verifytype" >
        verifytype
      </isNotNull>
      <isNotNull prepend="," property="verifystr" >
        verifystr
      </isNotNull>
      <isNotNull prepend="," property="signstring" >
        signstring
      </isNotNull>
      <isNotNull prepend="," property="createdate" >
        createdate
      </isNotNull>
      <isNotNull prepend="," property="paydate" >
        paydate
      </isNotNull>
      <isNotNull prepend="," property="memid" >
        memid
      </isNotNull>
      <isNotNull prepend="," property="pkgname" >
        pkgName
      </isNotNull>
      <isNotNull prepend="," property="buytype" >
        buytype
      </isNotNull>
      <isNotNull prepend="," property="nums" >
        nums
      </isNotNull>
      <isNotNull prepend="," property="snum" >
        snum
      </isNotNull>
      <isNotNull prepend="," property="propstype" >
        propstype
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="merchantsid" >
        #merchantsid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productid" >
        #productid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="channelid" >
        #channelid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="version" >
        #version:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="merusername" >
        #merusername:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="meruseremail" >
        #meruseremail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="privatefield" >
        #privatefield:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userid" >
        #userid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="usertp" >
        #usertp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paytype" >
        #paytype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderno" >
        #orderno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="payorderno" >
        #payorderno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderstatus" >
        #orderstatus:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="returnurl" >
        #returnurl:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="denomination" >
        #denomination:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="cardno" >
        #cardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardpwd" >
        #cardpwd:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardtype" >
        #cardtype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardinfo" >
        #cardinfo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="amount" >
        #amount:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="itemid" >
        #itemid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="reserveinfo" >
        #reserveinfo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="timestamp" >
        #timestamp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="verifytype" >
        #verifytype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="verifystr" >
        #verifystr:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="signstring" >
        #signstring:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdate" >
        #createdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="paydate" >
        #paydate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="memid" >
        #memid:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="pkgname" >
        #pkgname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="buytype" >
        #buytype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="nums" >
        #nums:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="snum" >
        #snum:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="propstype" >
        #propstype:VARCHAR#
      </isNotNull>
      )
    </dynamic>
    <selectKey resultClass="java.lang.Long" keyProperty="id" >
      SELECT LAST_INSERT_ID()
    </selectKey>
  </insert>
  
<!-- 更新神州付订单支付状态 -->
 <update id="updateStatusByOrderNo" parameterClass="java.util.HashMap">
<![CDATA[
 update v_order_pay_info
 set orderstatus=#status#,paydate=SYSDATE() 
 where orderno = #orderno#
]]>
</update>

 <select id="selectOrderStatusByOrderId" parameterClass="java.util.HashMap" resultMap="ibatorgenerated_BaseResultMap">
 select * from v_order_pay_info 
 where orderno = #orderno#
</select>
</sqlMap>